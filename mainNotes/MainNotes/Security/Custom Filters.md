Любой запрос, который приходит проходит через цепочку фильтров, которые что-то делают и отправлять запрос по цепочке. 
![[Pasted image 20241227104158.png]]

Можно включить дебаг мод:
![[Pasted image 20241227104427.png]]
Благодаря этой настройке в логах мы можем увидеть список фильтров через которые проходит наш запрос:
![[Pasted image 20241227104607.png]]
![[Pasted image 20241227104532.png]]
Также вот такая информация доступна:
![[Pasted image 20241227104646.png]]
Но такое можно использовать только локально, в продакшене такое запрещено.

На самом деле есть VirtualFilterChain, в которой находятся фильтры спринга. И запрос сначала идет по этой цепочке, а потом попадает в dispatcherServlet, который уже направляет запрос к соответствующему контроллеру. 

### Варианты создания своих собственных фильтров
#### Интерфейс Filter
![[Pasted image 20241227105514.png]]
init - вызывается один раз при запуске приложения.
doFilter - основной метод, через который проходят все запросы 
destroy - при остановке веб-приложения. 
#### Класс OncePerRequestFilter
Данный фильтр буде вызван строго 1 раз для каждого запроса(существует сценарии, где запрос может быть дважды обработан одним и тем же фильтром. Если в нашем случае такое запрещено, то нужно использовать OncePerRequest, который обеспечит выполнении логики фильтра строго 1 раз для каждого запроса).
![[Pasted image 20241227110429.png]]
### Как добавить собственный фильтр в FilterChain?
![[Pasted image 20241227110147.png]]
![[Pasted image 20241227110440.png]]

### Реализуем следующий фильтр
![[Pasted image 20241227110544.png]]

![[Pasted image 20241227111533.png]]
![[Pasted image 20241227114140.png]]

![[Pasted image 20241227115929.png]]