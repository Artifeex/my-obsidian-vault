![[Pasted image 20241025115719.png]]
![[Pasted image 20241025115844.png]]
![[Pasted image 20241025115923.png]]
![[Pasted image 20241025120332.png]]

 ![[Pasted image 20241025120553.png]]
 Утечка память в Java это когда есть достижимые объекты(т.е. не мусор), но при этом они не используются. Т.е. они занимают память, но пользы от них нет. Это небольшая проблема, если таких объектов - немного. А вот если они постоянно добавляются - то это уже проблема. В какой-то момент память просто закончится и получим OutOfMemory.

Также из-за утечек приложение может очень медленно работать. Мы не вылетаем с OutOfMemory, но при этом GC постоянно работает, чтобы освободить место под новые объекты.

![[Pasted image 20241025120923.png]]
![[Pasted image 20241025121032.png]]
Учебный вариант - решили кэшировать строки. Есть запросы и мы кэшируем их.

Какие варианты? Можем почитать логи GC. 
![[Pasted image 20241025121211.png]]![[Pasted image 20241025121251.png]]
Но как видим, такие логи тяжело читать, поэтому есть GCEasy - в него можно закинуть файлик с логами и он нарисует графики.
![[Pasted image 20241025121353.png]]
48% - это КПД нашего приложения. Как видим, 52% времени работал GC.
![[Pasted image 20241025121418.png]]
Как видим на графике - у нас память линейно увеличивается. А при нормальном работе программы у нас должны быть зубчики. Т.е. память выделилась -> освободилась. Т.е. на протяжении работы всего приложения потребление памяти примерно на одном уровне. А тут же видим, что потребление памяти растет постоянно:
![[Pasted image 20241025121537.png]]

Хорошо, мы узнали, что в приложении есть проблемы с памятью. Но как решить ? Приложение может быть огромным, как найти точку, где оно поломалось ? Для этого мы снимаем дамп памяти за какое-то время.
![[Pasted image 20241025121755.png]]
Но файлик очень сложно читать, поэтому нужно пользоваться визуализатором и передать в него файл с дампом:
![[Pasted image 20241025121914.png]]
 Есть огромный объект на 5.3гб.
![[Pasted image 20241025122058.png]]
