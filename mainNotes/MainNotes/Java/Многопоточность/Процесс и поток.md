![[Pasted image 20240925205300.png]]
Процессы не разделяют общую память. ОС выделяет для каждого из процессов свое адресное пространство. Т.е. у каждого процесса свой кусок оперативной памяти. Процесс не может выходить за пределы памяти, которую ему выделила ОС. Он не может посмотреть в память другого процессу, чтобы получить из нее какие-то данные, ОС ему этого не позволит.

Поток - это набор команд, которые выполняются внутри процесса. Потоки разделяют общую память процесса(имеется в виду heap, при этом thread stack все также не разделятся среди потоков.) Из-за того, что они разделяют общую память и происходят проблемы с многопоточностью. И существуют различные механизмы синхронизации. Один из них - это [[Synchronized]].


ОС выделяет для процесса оперативную память и следит, чтобы он не выходил за ее пределы, т.к. каждый процесс изолирован друг от друга. Это нужно для обеспечения безопасности, поскольку если бы ОС разрешала потокам залазить в чужую память, то какой-то вредоносный процесс мог нарушать работу других или получать их данные. 
ОС выдает потоку не реальные адреса, а виртуальные и потом занимается маппингом адресов из виртуального пространства на физическое.

Для взаимодействия процессов, т.к. у них нет общей разделяемой памяти используются специальные средства. Я лично пользовался MPI(С++ библиотека). Я реализовывал быстрое умножение матриц в распределенной среде.

Процесс внутри себя хранит память и код, а потоки хранят только код и уже пользуются памятью процесса. Процесс является овнером потоков.

### Синхронизация потоков
Т.к. потоки работают с общей памятью, то тут и появляются проблемы, связанные с этим. Основными проблемами являются [[Проблемы многопоточности]] Синхронизация потоков нужна как раз для того, чтобы решить эти проблемы.

### Зачем нам вообще многопоточность?
Во-первых, для улучшения перформанса. Можно увеличить перформанс приложения за счето того, что какие-то рассчетные операции производить в нескольких потоках. Например, я когда-то писал умножение матриц и за счет того, что мы можем при умножении матриц разделить их по строчкам и столбцам для каждого потока и пусть каждый поток обрабатывает свое, а потом мы все соберем в результат - и достигается увеличение производительсти.

Во-вторых, само приложении может быть построено так, что в нем будет несколько независимых частей, которые должны работать параллельно. Например, UI поток для отрисовки и бек для внутренних каких-то операций.