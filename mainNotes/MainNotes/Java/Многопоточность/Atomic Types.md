![[Pasted image 20240925212047.png]]
Атомарная операция - это неделимая операция. Ее невозможно разбить на части. Другой поток не может вклиниться в выполнение кода, который происходит внутри атомарной операции.
AtomicIntegerArray - предоставляет, например, атомарную операцию записи. Перед тем как записать значение в ячейку он проверяет, не изменилось ли в ней значение с момента чтения. Если изменилось, значит, другой поток записал туда свои данные.
AtomicInteger - предоставляем атомарные инкременты. 

### Под капотом атомарные типы используют CAS
![[Pasted image 20240925212648.png]]
Т.е. compare and swap дает нам атомарную операцию чтения значения и его замены.
Например, когда мы используем AtomicInteger и вызываем метод инкремент. Например, было значение 10, мы в потоке хотим инкрементнуть его до 11. Вызывается compare and swap. Проверяется, что в памяти действительно сейчас лежит значение 10 и если да, то туда записывается 11. А вот если нет, то, это значит, что другой поток сделал инкремент, то тогда мы отменяем эту операцию и пытаемся выполнить ее по новой, но теперь у нас уже значение 11 и в памяти мы проверяем, что лежит также 11 и если да, то наконец наш поток может сделать инкремент, который хотел.

