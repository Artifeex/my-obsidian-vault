ArrayList наследуется от AbstractList и реализует интерфейс List.
![[Pasted image 20240925162954.png]]
При создании под капотом создается массив с размером 10. 
Только что созданный объект list, содержит свойства elementData и size.

Хранилище значений elementData есть ни что иное как массив определенного типа (указанного в generic), в нашем случае String[]. Если вызывается конструктор без параметров, то по умолчанию будет создан массив из 10-ти элементов типа Object (с приведением к типу, разумеется).
elementData = (E[]) new Object[10];

И когда мы добавляем элементы, они заполняется в незаполненные в массиве ячейке по порядку. И когда добавляется новый элемент и не хватает места, тогда происходит увеличение размера массива 1.5 раза. В памяти создается новый массив большего размера и все значения из старого массива копируются в новый. Важно то, что копирование происходит не в тупую, а с использованием System.arraycopy() метода, который является native методом. Удобен тем, что делает это все сам и нам не нужно задумываться о том, какого размера создать коллекцию, если мы не знаем.
Т.к. ArrayList работает поверх массива, то как мы знаем, массивы хранятся единым блоком памяти. Т.е. все элемента находятся рядом друг с другом. Благодаря этому мы можем быстро обратиться к любому индексу, т.к. мы можем посчитать, где находится этот индекс. Мы знаем, где находится начало массива и знаем размер каждой ячейки массива. 

Как можно догадаться, в случаях, когда происходит вставка элемента по индексу и при этом в вашем массиве нет свободных мест, то вызов System.arraycopy() случится дважды: первый в ensureCapacity(), второй в самом методе add(index, value), что явно скажется на скорости всей операции добавления.

В случаях, когда в исходный список необходимо добавить другую коллекцию, да еще и в «середину», стоит использовать метод addAll(index, Collection). И хотя, данный метод скорее всего вызовет System.arraycopy() три раза, в итоге это будет гораздо быстрее поэлементного добавления.

### Ассимптотика
![[Pasted image 20240925164805.png]]

### Потокобезопасный вариант - [[CopyOnWriteArrayList]]