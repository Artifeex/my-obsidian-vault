Подключаем зависимость
![[Pasted image 20240913135433.png]]
И увидим, что основная зависимость, которая тянется - это hibernateValidator
![[Pasted image 20240913135511.png]]
В этой зависимости тянется jsr303 спецификация по валидации бинов. В ней очень много аннотаций. Т.е. мы будем ставить аннотации и автоматически будет запускаться валидация.
![[Pasted image 20240913135553.png]]

Рассмотрим какие аннотации есть.
![[Pasted image 20240913135716.png]]
А также мы можем писать свои!
@Min - для задания минимального значения числа
@Max - для задания максимального значения числа
@Email - для имейлов
Также есть множество аннотаций для дат:
@Future - чтобы переданная дата была в будущем
@FutureOrPresent - чтобы переданная дата была в будущем или настоящем.
@Past - дата в прошлом
@PastOrPresent - в прошлом или настоящее.
@Pattern - ставим над String и можем использовать регулярные выражения для валидации.
@Positive - проверяет число на положительность.
@Size - длина строк, размер коллекций.
@NotBlank - проверяет, что строка непустая, а также, что в ней нет blank символов(табуляция или пробел).
@NotEmpty - проверяет, что строка непустая.

Добавим несколько аннотация для валидации DTO
![[Pasted image 20240913140329.png]]
Как запустить процесс валидации?
Нужно добавить @Validили @Validated(это аналог Valid от Springa. Отличием является то, что мы можем передавать в него группы, по которым должна происходить валидация).
![[Pasted image 20240913140511.png]]
Но где нам посмотреть ошибки и как-то на них отреагировать? Для этого сразу же после валидиируемой сущности нужно передать BindingResult, в котором и будет вся информация по ошибкам. BindingResult обязательно должен идти после валидируемого объекта. Если так не сделать, то работать не будет.
![[Pasted image 20240913140833.png]]
![[Pasted image 20240913141057.png]]
Теперь на View отобразим ошибки, если они есть, получим их из session.
![[Pasted image 20240913141220.png]]
Результат:
![[Pasted image 20240913141341.png]]

### Custom-validator
Перед тем как написать свою аннотацию для валидации разберемся, что находится внутри аннотаций по валидации
![[Pasted image 20240913141727.png]]
![[Pasted image 20240913141911.png]]
Создадим свою аннотации, которая будет проверять что хотя бы одно поле firstname или lastname заполнены, т.е. не равны null.
![[Pasted image 20240913142106.png]]
Напишем класс валидатор:
![[Pasted image 20240913142514.png]]
![[Pasted image 20240913142554.png]]
Еще стоит заметить, что все аннотации независимые. Т.е. они все отдельно будут проверяться сколько бы мы не навесили их над полем или классом.
![[Pasted image 20240913142659.png]]

Более того, мы можем валидировать не только Dto в контроллерах, но и DatabaseProperties, который считывает инфу из yaml файлов. И тем самым, во время подъема нашего приложения, если валидации для этого DatabaseProperties не прошла, то приложение не поднимется.
![[Pasted image 20240913142739.png]]

Теперь разберемся с тем, как работать с группами при валидации. Для этого должны добавить группу в аннотацию.
![[Pasted image 20240913143018.png]]

![[Pasted image 20240913143204.png]]

Сама группа же представляет собой просто интерфейс метку. Т.е. просто по сути задаем название для группы с помощью создания интерфейса.
![[Pasted image 20240913143338.png]]