**

Логирование

В ходе работы приложения могут возникать различные нештатные ситуации. Ведение логов - журнала произошедших событий - впоследствии поможет найти их причину. Также можно настроить мониторинг логов в режиме реального времени для сбора важных показателей и для оперативного уведомления о возникновении нештатных ситуаций.

Самый простой способ писать логи - делать это при помощи System.out.println - тогда они попадут в консоль. Однако этот вариант имеет ряд существенных недостатков:

- по старым логам в консоли сложно выполнить поиск;
    
- у консоли есть ограничение на размер истории, соответственно старые логи мы просто не увидим.
    

На практике принято использовать другие подходы: писать логи в файлы или в централизованное хранилище, в роли которого может выступать, например, Elasticsearch.

# Логирование в Spring Boot

Spring Boot берёт на себя вопросы конфигурирования логгера, поэтому мы можем просто создать его инстанс:

|   |
|---|
|Logger logger = LoggerFactory.getLogger(LoggingDemoController.class);|

Пользоваться логгером достаточно просто (по умолчанию логи будут просто выводиться в консоль):

|   |
|---|
|logger.trace("Маршрут выполнения программы");  <br>logger.debug("Отладочное сообщение");  <br>logger.info("Информационное сообщение");  <br>logger.warn("Предупреждение");  <br>logger.error("Сообщение об ошибке");|

Если создать простое Spring Boot-приложение и выполнить в нём данный код, то в консоли мы увидим лишь последние 3 сообщения. Первые два сообщения не будут отображены, поскольку их уровень логирования ниже, чем уровень INFO, который используется по умолчанию.

## Уровни логирования

Лог-записи бывают различных уровней: TRACE, DEBUG, INFO, WARN, ERROR. Уровень обозначают важность сообщения: TRACE - уровень для логов с минимальной важностью, ERROR - с максимальной. Чем важнее то событие в программе, которое логируется, тем более высокий уровень нужно использовать:

TRACE

- Сопутствующие/второстепенные операции и проверки
    

DEBUG

- Логин, логаут
    
- Ошибки регистрации и аутентификации пользователя
    
- Ошибки при добавлении, изменении и удалении бизнес-объектов
    

INFO

- Успешное добавление, изменение, удаление бизнес-объектов
    
- Успешная регистрация пользователя
    
- Изменение учётных данных пользователя
    

WARN

- Ошибки валидации на сервере, которые штатно не должны возникать
    
- Прочие некорректные запросы с клиента, которые могут сигнализировать о нештатной или потенциально зловредной деятельности пользователя
    

ERROR

- Исключения и ошибки
    

  

Обычно получается так, что больше всего логируется сообщений с низкой важностью (TRACE, DEBUG), а с высокой - меньше. И если на начальном этапе жизни программы часто нужны подробные логи, то со временем такая потребность снижается и нас будут интересовать только важные события. И чтобы не менять код, удаляя из него трейсы, можно в конфигурации задать интересующий нас уровень логирования - тогда логироваться будут сообщения с этим уровнем и сообщения с более высоким уровнем.

Напомним, что по умолчанию используется уровень INFO. Именно поэтому в примере выше вывелись лишь сообщения с уровнями INFO, WARN и ERROR.

## Библиотеки логирования

Существует несколько библиотек, при помощи которых можно выполнять логирование: logback, log4j, пакет java.util.logging. Чтобы не завязываться на какую-то конкретную из них и иметь в своём проекте возможность заменить одну библиотеку на другую, можно воспользоваться библиотекой-фасадом SLF4J.

SLF4J действует как универсальный адаптер: он предоставляет общий API, делая логирование в проекте независимым от конкретной библиотеки логирования.

При использовании Spring Boot-стартеров будет использоваться SLF4J и Logback в качестве конкретной библиотеки логирования. Чтобы изменить уровень логирования, можно внести изменения в application.properties:

|   |
|---|
|logging.level.root=TRACE|

Также можно задать этот уровень при запуске уже собранного приложения:

|   |
|---|
|java -jar myApp-0.0.1-SNAPSHOT.jar --trace|



**