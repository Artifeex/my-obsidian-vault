![[Pasted image 20241105093501.png]]
![[Pasted image 20241105093443.png]]
Зачем ваще нужны партишены? Они нужны для многопоточности. Т.е. когда у нас одно место, когда мы со всех производителей кладем данные, то это не эффективно. А вот если у нас сразу несколько мест, куда мы можем писать каждым производителем, то это уже круто.  Аналогично и с потребителями, может быть много потребителей, которые будут читать данные сразу с нескольких партиций. 
Т.е позволяет увеличить пропускную способность топика.
![[Pasted image 20241105093602.png]]
Важный нюанс про порядок - т.к. несколько партишинов, в которые мы можем писать, то нарушается порядок. Т.е. мы могли отравить сообщение в первый партишен, а потом во второй. Но при этом потребиться они могут в любом порядке. Порядок гарантируется только в том случае, если мы пишем в один и тот же партишен.

### Партишены можно разделять по различным физическим серверам, тем самым уменьшая нагрузку на конкретную машину и разделяя эту нагрузку на несколько машин 
![[Pasted image 20241105094433.png]]

### Репликация в kafka
 У нас создаются копии партишенов на разных машинах, чтобы избежать потери данных.
![[Pasted image 20241105094715.png]]
### Масштабирование
![[Pasted image 20241105095747.png]]
Микросервисы договариваются, кто в какой сервер kafka в какой партишен пишет. И consumer тоже договариваются, кто откуда читает. 

### Важной причиной распространения kafka является именно возможность по сути бесконечного масштабирования за счет партишенов
